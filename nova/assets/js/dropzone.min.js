(function(){var h,l,A,m,B,s={}.hasOwnProperty,E=[].slice;l="undefined"!==typeof Emitter&&null!==Emitter?Emitter:require("emitter");m=function(){};var e=function(a,b){var d,c,f;this.element=a;this.version=e.version;this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,"");this.clickableElements=[];this.listeners=[];this.files=[];"string"===typeof this.element&&(this.element=document.querySelector(this.element));if(!(this.element&&null!=this.element.nodeType))throw Error("Invalid dropzone element.");
if(this.element.dropzone)throw Error("Dropzone already attached.");e.instances.push(this);a.dropzone=this;d=null!=(f=e.optionsForElement(this.element))?f:{};this.options=v({},this.defaultOptions,d,null!=b?b:{});null==this.options.url&&(this.options.url=this.element.action);if(!this.options.url)throw Error("No URL provided.");if(this.options.acceptParameter&&this.options.acceptedMimeTypes)throw Error("You can't provide both 'acceptParameter' and 'acceptedMimeTypes'. 'acceptParameter' is deprecated.");
this.options.method=this.options.method.toUpperCase();if(this.options.forceFallback||!e.isBrowserSupported())return this.options.fallback.call(this);(c=this.getExistingFallback())&&c.parentNode&&c.parentNode.removeChild(c);this.previewsContainer=this.options.previewsContainer?e.getElement(this.options.previewsContainer,"previewsContainer"):this.element;this.options.clickable&&(this.clickableElements=!0===this.options.clickable?[this.element]:e.getElements(this.options.clickable,"clickable"));this.init()},
v,t=e,C=function(){this.constructor=t},u;for(u in l)s.call(l,u)&&(t[u]=l[u]);C.prototype=l.prototype;t.prototype=new C;t.__super__=l.prototype;e.prototype.events="drop dragstart dragend dragenter dragover dragleave selectedfiles addedfile removedfile thumbnail error processingfile uploadprogress totaluploadprogress sending success complete reset".split(" ");e.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,maxFilesize:256,paramName:"file",createImageThumbnails:!0,
maxThumbnailFilesize:10,thumbnailWidth:100,thumbnailHeight:100,params:{},clickable:!0,acceptedMimeTypes:null,acceptParameter:null,enqueueForUpload:!0,addRemoveLinks:!1,previewsContainer:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MB). Max filesize: {{maxFilesize}}MB.",dictInvalidFileType:"You can't upload files of this type.",
dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",accept:function(a,b){return b()},init:function(){return m},forceFallback:!1,fallback:function(){var a,b,d,c,f;this.element.className=""+this.element.className+" dz-browser-not-supported";f=this.element.getElementsByTagName("div");d=0;for(c=f.length;d<c;d++)a=f[d],/(^| )dz-message($| )/.test(a.className)&&
(b=a,a.className="dz-message");b||(b=e.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(b));if(a=b.getElementsByTagName("span")[0])a.textContent=this.options.dictFallbackMessage;return this.element.appendChild(this.getFallbackForm())},resize:function(a){var b,d,c;b={srcX:0,srcY:0,srcWidth:a.width,srcHeight:a.height};d=a.width/a.height;c=this.options.thumbnailWidth/this.options.thumbnailHeight;a.height<this.options.thumbnailHeight||a.width<this.options.thumbnailWidth?
(b.trgHeight=b.srcHeight,b.trgWidth=b.srcWidth):d>c?(b.srcHeight=a.height,b.srcWidth=b.srcHeight*c):(b.srcWidth=a.width,b.srcHeight=b.srcWidth/c);b.srcX=(a.width-b.srcWidth)/2;b.srcY=(a.height-b.srcHeight)/2;return b},drop:function(){return this.element.classList.remove("dz-drag-hover")},dragstart:m,dragend:function(){return this.element.classList.remove("dz-drag-hover")},dragenter:function(){return this.element.classList.add("dz-drag-hover")},dragover:function(){return this.element.classList.add("dz-drag-hover")},
dragleave:function(){return this.element.classList.remove("dz-drag-hover")},selectedfiles:function(){if(this.element===this.previewsContainer)return this.element.classList.add("dz-started")},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(a){var b=this;a.previewElement=e.createElement(this.options.previewTemplate);a.previewTemplate=a.previewElement;this.previewsContainer.appendChild(a.previewElement);a.previewElement.querySelector("[data-dz-name]").textContent=
a.name;a.previewElement.querySelector("[data-dz-size]").innerHTML=this.filesize(a.size);if(this.options.addRemoveLinks)return a._removeLink=e.createElement('<a class="dz-remove" href="javascript:undefined;">'+this.options.dictRemoveFile+"</a>"),a._removeLink.addEventListener("click",function(d){d.preventDefault();d.stopPropagation();if(a.status===e.UPLOADING){if(window.confirm(b.options.dictCancelUploadConfirmation))return b.removeFile(a)}else return b.removeFile(a)}),a.previewElement.appendChild(a._removeLink)},
removedfile:function(a){var b;return null!=(b=a.previewElement)?b.parentNode.removeChild(a.previewElement):void 0},thumbnail:function(a,b){var d;a.previewElement.classList.remove("dz-file-preview");a.previewElement.classList.add("dz-image-preview");d=a.previewElement.querySelector("[data-dz-thumbnail]");d.alt=a.name;return d.src=b},error:function(a,b){a.previewElement.classList.add("dz-error");return a.previewElement.querySelector("[data-dz-errormessage]").textContent=b},processingfile:function(a){a.previewElement.classList.add("dz-processing");
if(a._removeLink)return a._removeLink.textContent=this.options.dictCancelUpload},uploadprogress:function(a,b){return a.previewElement.querySelector("[data-dz-uploadprogress]").style.width=""+b+"%"},totaluploadprogress:m,sending:m,success:function(a){return a.previewElement.classList.add("dz-success")},complete:function(a){if(a._removeLink)return a._removeLink.textContent=this.options.dictRemoveFile},previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-details">\n    <div class="dz-filename"><span data-dz-name></span></div>\n    <div class="dz-size" data-dz-size></div>\n    <img data-dz-thumbnail />\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-success-mark"><span>\u2714</span></div>\n  <div class="dz-error-mark"><span>\u2718</span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n</div>'};
v=function(){var a,b,d,c,f,e,g;c=arguments[0];d=2<=arguments.length?E.call(arguments,1):[];e=0;for(g=d.length;e<g;e++)for(a in b=d[e],b)f=b[a],c[a]=f;return c};e.prototype.getAcceptedFiles=function(){var a,b,d,c,f;c=this.files;f=[];b=0;for(d=c.length;b<d;b++)a=c[b],a.accepted&&f.push(a);return f};e.prototype.getRejectedFiles=function(){var a,b,d,c,f;if(!a.accepted){c=this.files;f=[];b=0;for(d=c.length;b<d;b++)a=c[b],f.push(a);return f}};e.prototype.getQueuedFiles=function(){var a,b,d,c,f;c=this.files;
f=[];b=0;for(d=c.length;b<d;b++)a=c[b],a.status===e.QUEUED&&f.push(a);return f};e.prototype.getUploadingFiles=function(){var a,b,d,c,f;c=this.files;f=[];b=0;for(d=c.length;b<d;b++)a=c[b],a.status===e.UPLOADING&&f.push(a);return f};e.prototype.enqueueFile=function(a){if(a.status===e.ACCEPTED)return a.status=e.QUEUED,this.processQueue();throw Error("This file can't be queued because it has already been processed or was rejected.");};e.prototype.init=function(){var a,b,d,c,f,w,g=this;"form"===this.element.tagName&&
this.element.setAttribute("enctype","multipart/form-data");this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(e.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>"));this.clickableElements.length&&(d=function(){g.hiddenFileInput&&document.body.removeChild(g.hiddenFileInput);g.hiddenFileInput=document.createElement("input");g.hiddenFileInput.setAttribute("type","file");g.hiddenFileInput.setAttribute("multiple",
"multiple");null!=g.options.acceptedMimeTypes&&g.hiddenFileInput.setAttribute("accept",g.options.acceptedMimeTypes);null!=g.options.acceptParameter&&g.hiddenFileInput.setAttribute("accept",g.options.acceptParameter);g.hiddenFileInput.style.visibility="hidden";g.hiddenFileInput.style.position="absolute";g.hiddenFileInput.style.top="0";g.hiddenFileInput.style.left="0";g.hiddenFileInput.style.height="0";g.hiddenFileInput.style.width="0";document.body.appendChild(g.hiddenFileInput);return g.hiddenFileInput.addEventListener("change",
function(){var a;a=g.hiddenFileInput.files;a.length&&(g.emit("selectedfiles",a),g.handleFiles(a));return d()})},d());this.URL=null!=(a=window.URL)?a:window.webkitURL;w=this.events;c=0;for(f=w.length;c<f;c++)a=w[c],this.on(a,this.options[a]);this.on("uploadprogress",function(){return g.updateTotalUploadProgress()});this.on("removedfile",function(){return g.updateTotalUploadProgress()});b=function(a){a.stopPropagation();return a.preventDefault?a.preventDefault():a.returnValue=!1};this.listeners=[{element:this.element,
events:{dragstart:function(a){return g.emit("dragstart",a)},dragenter:function(a){b(a);return g.emit("dragenter",a)},dragover:function(a){b(a);return g.emit("dragover",a)},dragleave:function(a){return g.emit("dragleave",a)},drop:function(a){b(a);g.drop(a);return g.emit("drop",a)},dragend:function(a){return g.emit("dragend",a)}}}];this.clickableElements.forEach(function(a){return g.listeners.push({element:a,events:{click:function(b){if(a!==g.element||b.target===g.element||e.elementInside(b.target,
g.element.querySelector(".dz-message")))return g.hiddenFileInput.click()}}})});this.enable();return this.options.init.call(this)};e.prototype.destroy=function(){var a;this.disable();this.removeAllFiles(!0);if(null!=(a=this.hiddenFileInput)&&a.parentNode)return this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null};e.prototype.updateTotalUploadProgress=function(){var a,b,d,c,f,e;b=d=0;if(this.getAcceptedFiles().length){e=this.getAcceptedFiles();c=0;for(f=e.length;c<
f;c++)a=e[c],d+=a.upload.bytesSent,b+=a.upload.total;a=100*d/b}else a=100;return this.emit("totaluploadprogress",a,b,d)};e.prototype.getFallbackForm=function(){var a,b;if(a=this.getExistingFallback())return a;a='<div class="dz-fallback">';this.options.dictFallbackText&&(a+="<p>"+this.options.dictFallbackText+"</p>");a+='<input type="file" name="'+this.options.paramName+'[]" multiple="multiple" /><button type="submit">Upload!</button></div>';a=e.createElement(a);"FORM"!==this.element.tagName?(b=e.createElement('<form action="'+
this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),b.appendChild(a)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method));return null!=b?b:a};e.prototype.getExistingFallback=function(){var a,b,d,c,f;b=function(a){var b,d,c;d=0;for(c=a.length;d<c;d++)if(b=a[d],/(^| )fallback($| )/.test(b.className))return b};f=["div","form"];d=0;for(c=f.length;d<c;d++)if(a=f[d],a=b(this.element.getElementsByTagName(a)))return a};
e.prototype.setupEventListeners=function(){var a,b,d,c,f,e,g;e=this.listeners;g=[];c=0;for(f=e.length;c<f;c++)a=e[c],g.push(function(){var c,f;c=a.events;f=[];for(b in c)d=c[b],f.push(a.element.addEventListener(b,d,!1));return f}());return g};e.prototype.removeEventListeners=function(){var a,b,d,c,f,e,g;e=this.listeners;g=[];c=0;for(f=e.length;c<f;c++)a=e[c],g.push(function(){var c,f;c=a.events;f=[];for(b in c)d=c[b],f.push(a.element.removeEventListener(b,d,!1));return f}());return g};e.prototype.disable=
function(){var a,b,d,c,f;this.clickableElements.forEach(function(a){return a.classList.remove("dz-clickable")});this.removeEventListeners();c=this.files;f=[];b=0;for(d=c.length;b<d;b++)a=c[b],f.push(this.cancelUpload(a));return f};e.prototype.enable=function(){this.clickableElements.forEach(function(a){return a.classList.add("dz-clickable")});return this.setupEventListeners()};e.prototype.filesize=function(a){var b;1E11<=a?(a/=1E11,b="TB"):1E8<=a?(a/=1E8,b="GB"):1E5<=a?(a/=1E5,b="MB"):100<=a?(a/=
100,b="KB"):(a*=10,b="b");return"<strong>"+Math.round(a)/10+"</strong> "+b};e.prototype.drop=function(a){if(a.dataTransfer&&(a=a.dataTransfer.files,this.emit("selectedfiles",a),a.length))return this.handleFiles(a)};e.prototype.handleFiles=function(a){var b,d,c,f;f=[];d=0;for(c=a.length;d<c;d++)b=a[d],f.push(this.addFile(b));return f};e.prototype.accept=function(a,b){return a.size>1048576*this.options.maxFilesize?b(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(a.size/1024/10.24)/100).replace("{{maxFilesize}}",
this.options.maxFilesize)):e.isValidMimeType(a.type,this.options.acceptedMimeTypes)?this.options.accept.call(this,a,b):b(this.options.dictInvalidFileType)};e.prototype.addFile=function(a){var b=this;a.upload={progress:0,total:a.size,bytesSent:0};this.files.push(a);a.status=e.ADDED;this.emit("addedfile",a);this.options.createImageThumbnails&&(a.type.match(/image.*/)&&a.size<=1048576*this.options.maxThumbnailFilesize)&&this.createThumbnail(a);return this.accept(a,function(d){if(d)return a.accepted=
!1,b.errorProcessing(a,d);a.status=e.ACCEPTED;a.accepted=!0;if(b.options.enqueueForUpload)return a.status=e.QUEUED,b.processQueue()})};e.prototype.removeFile=function(a){a.status===e.UPLOADING&&this.cancelUpload(a);this.files=B(this.files,a);this.emit("removedfile",a);if(0===this.files.length)return this.emit("reset")};e.prototype.removeAllFiles=function(a){var b,d,c,f;null==a&&(a=!1);f=this.files.slice();d=0;for(c=f.length;d<c;d++)b=f[d],(b.status!==e.UPLOADING||a)&&this.removeFile(b);return null};
e.prototype.createThumbnail=function(a){var b,d=this;b=new FileReader;b.onload=function(){var c;c=new Image;c.onload=function(){var b,e,g,h,j,p,k;a.width=c.width;a.height=c.height;g=d.options.resize.call(d,a);null==g.trgWidth&&(g.trgWidth=d.options.thumbnailWidth);null==g.trgHeight&&(g.trgHeight=d.options.thumbnailHeight);b=document.createElement("canvas");e=b.getContext("2d");b.width=g.trgWidth;b.height=g.trgHeight;e.drawImage(c,null!=(h=g.srcX)?h:0,null!=(j=g.srcY)?j:0,g.srcWidth,g.srcHeight,null!=
(p=g.trgX)?p:0,null!=(k=g.trgY)?k:0,g.trgWidth,g.trgHeight);b=b.toDataURL("image/png");return d.emit("thumbnail",a,b)};return c.src=b.result};return b.readAsDataURL(a)};e.prototype.processQueue=function(){var a,b,d;b=this.options.parallelUploads;a=this.getUploadingFiles().length;for(d=this.getQueuedFiles();a<b&&d.length;)this.processFile(d.shift()),a++};e.prototype.processFile=function(a){a.processing=!0;a.status=e.UPLOADING;this.emit("processingfile",a);return this.uploadFile(a)};e.prototype.cancelUpload=
function(a){var b;if(a.status===e.UPLOADING)a.status=e.CANCELED,a.xhr.abort();else if((b=a.status)===e.ADDED||b===e.ACCEPTED||b===e.QUEUED)a.status=e.CANCELED;this.emit("complete",a);return this.processQueue()};e.prototype.uploadFile=function(a){var b,d,c,f,h,g,k,j,p,l,n,m=this;j=new XMLHttpRequest;a.xhr=j;j.withCredentials=!!this.options.withCredentials;j.open(this.options.method,this.options.url,!0);g=null;d=function(){return m.errorProcessing(a,g||m.options.dictResponseError.replace("{{statusCode}}",
j.status),j)};k=function(b){var c;if(null!=b)c=100*b.loaded/b.total,a.upload={progress:c,total:b.total,bytesSent:b.loaded};else{if(100===a.upload.progress&&a.upload.bytesSent===a.upload.total)return;c=100;a.upload.progress=c;a.upload.bytesSent=a.upload.total}return m.emit("uploadprogress",a,c,a.upload.bytesSent)};j.onload=function(b){var c;if(a.status!==e.CANCELED&&4===j.readyState){g=j.responseText;if(j.getResponseHeader("content-type")&&~j.getResponseHeader("content-type").indexOf("application/json"))try{g=
JSON.parse(g)}catch(f){b=f,g="Invalid JSON response from server."}k();return 200<=(c=j.status)&&300>c?m.finished(a,g,b):d()}};j.onerror=function(){if(a.status!==e.CANCELED)return d()};(null!=(c=j.upload)?c:j).onprogress=k;c={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest","X-File-Name":encodeURIComponent(a.name)};this.options.headers&&v(c,this.options.headers);for(b in c)h=c[b],j.setRequestHeader(b,h);b=new FormData;if(this.options.params)for(f in h=this.options.params,
h)c=h[f],b.append(f,c);if("FORM"===this.element.tagName){n=this.element.querySelectorAll("input, textarea, select, button");p=0;for(l=n.length;p<l;p++)f=n[p],c=f.getAttribute("name"),h=f.getAttribute("type"),(!h||"checkbox"!==h.toLowerCase()||f.checked)&&b.append(c,f.value)}this.emit("sending",a,j,b);b.append(this.options.paramName,a);return j.send(b)};e.prototype.finished=function(a,b,d){a.status=e.SUCCESS;this.processQueue();this.emit("success",a,b,d);this.emit("finished",a,b,d);return this.emit("complete",
a)};e.prototype.errorProcessing=function(a,b,d){a.status=e.ERROR;this.processQueue();this.emit("error",a,b,d);return this.emit("complete",a)};h=e;h.version="3.5.1";h.options={};h.optionsForElement=function(a){if(a.id)return h.options[A(a.id)]};h.instances=[];h.forElement=function(a){"string"===typeof a&&(a=document.querySelector(a));if(null==(null!=a?a.dropzone:void 0))throw Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");
return a.dropzone};h.autoDiscover=!0;h.discover=function(){var a,b,d,c,f;if(h.autoDiscover){document.querySelectorAll?b=document.querySelectorAll(".dropzone"):(b=[],a=function(a){var c,d,f,e;e=[];d=0;for(f=a.length;d<f;d++)c=a[d],/(^| )dropzone($| )/.test(c.className)?e.push(b.push(c)):e.push(void 0);return e},a(document.getElementsByTagName("div")),a(document.getElementsByTagName("form")));f=[];d=0;for(c=b.length;d<c;d++)a=b[d],!1!==h.optionsForElement(a)?f.push(new h(a)):f.push(void 0);return f}};
h.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i];h.isBrowserSupported=function(){var a,b,d,c,f;a=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a")){f=h.blacklistedBrowsers;d=0;for(c=f.length;d<c;d++)b=f[d],b.test(navigator.userAgent)&&(a=!1)}else a=!1;else a=!1;return a};B=function(a,b){var d,c,f,e;e=[];c=0;for(f=a.length;c<f;c++)d=a[c],d!==b&&e.push(d);return e};A=function(a){return a.replace(/[\-_](\w)/g,
function(a){return a[1].toUpperCase()})};h.createElement=function(a){var b;b=document.createElement("div");b.innerHTML=a;return b.childNodes[0]};h.elementInside=function(a,b){if(a===b)return!0;for(;a=a.parentNode;)if(a===b)return!0;return!1};h.getElement=function(a,b){var d;"string"===typeof a?d=document.querySelector(a):null!=a.nodeType&&(d=a);if(null==d)throw Error("Invalid `"+b+"` option provided. Please provide a CSS selector or a plain HTML element.");return d};h.getElements=function(a,b){var d,
c,f,e,g;if(a instanceof Array){c=[];try{f=0;for(e=a.length;f<e;f++)d=a[f],c.push(this.getElement(d,b))}catch(h){c=null}}else if("string"===typeof a){c=[];g=document.querySelectorAll(a);f=0;for(e=g.length;f<e;f++)d=g[f],c.push(d)}else null!=a.nodeType&&(c=[a]);if(!(null!=c&&c.length))throw Error("Invalid `"+b+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return c};h.isValidMimeType=function(a,b){var d,c,e,h;if(!b)return!0;b=b.split(",");d=a.replace(/\/.*$/,
"");e=0;for(h=b.length;e<h;e++)if(c=b[e],c=c.trim(),/\/\*$/.test(c)){if(d===c.replace(/\/.*$/,""))return!0}else if(a===c)return!0;return!1};"undefined"!==typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(a){return this.each(function(){return new h(this,a)})});"undefined"!==typeof module&&null!==module?module.exports=h:window.Dropzone=h;h.ADDED="added";h.ACCEPTED="accepted";h.QUEUED="queued";h.UPLOADING="uploading";h.PROCESSING=h.UPLOADING;h.CANCELED="canceled";h.ERROR="error";h.SUCCESS="success";
var q=window,F=h.discover,k,x,n,y,r,D,z;x=!1;s=!0;k=q.document;z=k.documentElement;l=k.addEventListener?"addEventListener":"attachEvent";D=k.addEventListener?"removeEventListener":"detachEvent";r=k.addEventListener?"":"on";n=function(a){if(!("readystatechange"===a.type&&"complete"!==k.readyState)&&(("load"===a.type?q:k)[D](r+a.type,n,!1),!x&&(x=!0)))return F.call(q,a.type||a)};y=function(){try{z.doScroll("left")}catch(a){setTimeout(y,50);return}return n("poll")};if("complete"!==k.readyState){if(k.createEventObject&&
z.doScroll){try{s=!q.frameElement}catch(G){}s&&y()}k[l](r+"DOMContentLoaded",n,!1);k[l](r+"readystatechange",n,!1);q[l](r+"load",n,!1)}}).call(this);